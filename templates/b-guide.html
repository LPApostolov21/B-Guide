<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—Ä—Å–∫–∏ –ì–∏–¥ - –ß–∞—Ç –ë–æ—Ç</title>
    <style>
        /* --- Root Variables for Theming --- */
        :root {
            /* Light Theme Defaults */
            --bg-color: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 50%, #80deea 100%);
            --text-color: #333;
            --header-bg: rgba(0, 77, 128, 0.9);
            --header-shadow: rgba(0, 0, 0, 0.2);
            --container-bg: rgba(255, 255, 255, 0.5);
            --input-bg: rgba(0, 77, 128, 0.9);
            --input-border: #03a9f4;
            --input-text: white;
            --input-placeholder: rgba(255, 255, 255, 0.7);
            --input-focus-bg: rgba(255, 255, 255, 0.2);
            --bot-bubble-bg: #fff8e1;
            --bot-bubble-text: #333;
            --bot-bubble-border: #ffcc00;
            --welcome-text: #004d99;
            --welcome-title-shadow: 1px 1px 1px rgba(0, 77, 128, 0.7);
            --send-btn-color: #004d99;
            --typing-color: #ffcc00;

            /* Fixed Colors */
            --accent-color: #ffcc00;
            --user-bubble-start: #03a9f4;
            --user-bubble-end: #00bcd4;
            --user-bubble-text: white;
            --back-btn-border: #ffcc00;
        }

        /* --- Dark Theme Overrides --- */
        body.dark-theme {
            --bg-color: linear-gradient(135deg, #121212 0%, #1a1a1a 50%, #212121 100%);
            --text-color: #f0f0f0;
            --header-bg: rgba(33, 33, 33, 0.95);
            --header-shadow: rgba(255, 255, 255, 0.1);
            --container-bg: rgba(25, 25, 25, 0.7);
            --input-bg: rgba(33, 33, 33, 0.95);
            --input-border: #90caf9; /* Light blue border */
            --input-text: #f0f0f0;
            --input-placeholder: rgba(240, 240, 240, 0.5);
            --input-focus-bg: rgba(60, 60, 60, 0.5);
            --bot-bubble-bg: #424242; /* Darker bot bubble */
            --bot-bubble-text: #f0f0f0;
            --bot-bubble-border: #ffcc00;
            --welcome-text: #bbdefb; /* Lighter welcome text */
            --welcome-title-shadow: 1px 1px 1px rgba(255, 204, 0, 0.5);
            --send-btn-color: #121212; /* Dark send button icon */
            --typing-color: #ffcc00;
            --back-btn-border: #ffcc00;
        }

        /* --- General Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-color); /* Use variable */
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: var(--text-color); /* Use variable */
            transition: background 0.5s ease, color 0.5s ease;
        }

        .header {
            background: var(--header-bg); /* Use variable */
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-bottom: 2px solid var(--accent-color);
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 5px var(--header-shadow);
            position: relative; /* For theme toggle button */
        }

        .back-btn {
            background: none;
            border: 2px solid var(--back-btn-border);
            color: var(--accent-color);
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .back-btn:active {
            transform: scale(0.9);
            background: rgba(255, 204, 0, 0.2);
        }

        .header-title {
            color: var(--accent-color);
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .topics-bar {
            display: none;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background-color: var(--container-bg); /* Use variable */
            transition: background-color 0.5s ease;
        }

        .message {
            display: flex;
            gap: 0.5rem;
            max-width: 85%;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.bot {
            align-self: flex-start;
        }

        .message-bubble {
            padding: 0.8rem 1rem;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.4;
            word-wrap: break-word;
            white-space: pre-wrap; /* –ó–∞ –¥–∞ –∑–∞–ø–∞–∑–∏ –Ω–æ–≤–∏—Ç–µ —Ä–µ–¥–æ–≤–µ (\n) –æ—Ç JS */
            transition: background 0.5s ease, color 0.5s ease, border-color 0.5s ease;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--user-bubble-start), var(--user-bubble-end));
            color: var(--user-bubble-text);
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-bubble {
            background: var(--bot-bubble-bg); /* Use variable */
            color: var(--bot-bubble-text); /* Use variable */
            border: 1px solid var(--bot-bubble-border);
            border-bottom-left-radius: 4px;
        }

        .topic-tag {
            display: none;
        }

        .input-container {
            padding: 1rem;
            background: var(--input-bg); /* Use variable */
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 204, 0, 0.5);
            transition: background 0.5s ease;
        }

        .input-wrapper {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid var(--input-border); /* Use variable */
            border-radius: 25px;
            color: var(--input-text); /* Use variable */
            font-size: 1rem;
            font-family: inherit;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: var(--accent-color);
            background: var(--input-focus-bg); /* Use variable */
        }

        .chat-input::placeholder {
            color: var(--input-placeholder); /* Use variable */
        }

        .send-btn {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--accent-color), #ffb300);
            border: none;
            border-radius: 50%;
            color: var(--send-btn-color); /* Use variable */
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            font-weight: bold;
        }

        .send-btn:active {
            transform: scale(0.9);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: flex;
            gap: 0.3rem;
            padding: 0.8rem 1rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--typing-color); /* Use variable */
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.7; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        .welcome-message {
            text-align: center;
            color: var(--welcome-text); /* Use variable */
            padding: 2rem 1rem;
            font-size: 1rem;
            line-height: 1.6;
            transition: color 0.5s ease;
        }

        .welcome-message h2 {
            font-size: 1.6rem;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
            text-shadow: var(--welcome-title-shadow); /* Use variable */
        }

        /* --- New Theme Toggle Button Style --- */
        .theme-toggle {
            position: absolute;
            right: 1rem;
            background: none;
            border: 2px solid var(--accent-color);
            color: var(--accent-color);
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease, color 0.5s ease, border-color 0.5s ease;
        }

        .theme-toggle:hover {
            background: rgba(255, 204, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="back-btn" onclick="window.location.href='{{ url_for('home') }}'">‚Üê</button>
        <div class="header-title">‚öì –ú–æ—Ä—Å–∫–∏ –ì–∏–¥</div>
        <button class="theme-toggle" id="themeToggle" aria-label="–ü—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ —Ç–µ–º–∞">‚òÄÔ∏è</button>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="welcome-message">
            <h2>–î–æ–±—Ä–µ –¥–æ—à–ª–∏! –ê–∑ —Å—ä–º –í–∞—à–∏—è—Ç –ú–æ—Ä—Å–∫–∏ –ì–∏–¥!</h2>
            <p>–ü—Ä–µ–¥–∏ –¥–∞ –ø–æ—Ç–µ–≥–ª–∏–º, –∫–∞–∂–µ—Ç–µ **"–ó–¥—Ä–∞–≤–µ–π"** –∏–ª–∏ **"–ö–∞–∫–≤–æ –º–æ–∂–µ—à?"** –∏–ª–∏ **–ü–æ–º–æ—â**</p>
            <p>!!!–ú–æ–∂–µ—Ç–µ –¥–∞ –ø—Ä–∞—Ç–∏—Ç–µ —Å–∞–º–æ –µ–¥–Ω–∞ –∫–ª—É—á–æ–≤–∞ –¥—É–º–∞ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ!!!</p>
        </div>
    </div>

    <div class="input-container">
        <div class="input-wrapper">
            <input
                type="text"
                class="chat-input"
                id="messageInput"
                placeholder="–í—ä–≤–µ–¥–µ—Ç–µ —Å—ä–æ–±—â–µ–Ω–∏–µ..."
                autocomplete="off"
            >
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">‚û§</button>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        // --- Theme Logic ---
        function setIcon(isDark) {
            themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        }

        function applyTheme(isDark) {
            if (isDark) {
                body.classList.add('dark-theme');
                localStorage.setItem('theme', 'dark');
                setIcon(true);
            } else {
                body.classList.remove('dark-theme');
                localStorage.setItem('theme', 'light');
                setIcon(false);
            }
        }

        function toggleTheme() {
            const isDark = body.classList.contains('dark-theme');
            applyTheme(!isDark);
        }

        // Initialize theme based on stored preference or system preference
        const storedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (storedTheme === 'dark') {
            applyTheme(true);
        } else if (storedTheme === 'light') {
            applyTheme(false);
        } else {
            // Default to system preference if no stored theme
            applyTheme(prefersDark);
        }

        themeToggle.addEventListener('click', toggleTheme);
        // --- End Theme Logic ---


        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        function addMessage(text, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ –∫–ª—é—á–æ–≤–∏—Ç–µ –¥—É–º–∏ –≤ —É–¥–µ–±–µ–ª–µ–Ω —Ç–µ–∫—Å—Ç (HTML <strong>)
            const formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            bubble.innerHTML = formattedText;


            messageDiv.appendChild(bubble);
            chatContainer.appendChild(messageDiv);

            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble typing-indicator';
            bubble.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

            typingDiv.appendChild(bubble);
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function removeTyping() {
            const typing = document.getElementById('typing-indicator');
            if (typing) typing.remove();
        }

        /**
         * –†–∞–∑—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞ –æ—Ç–≥–æ–≤–æ—Ä –Ω–∞ —á–∞—Ç –±–æ—Ç–∞
         * @param {string} message - –°—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
         * @returns {string} - –†–∞–∑—à–∏—Ä–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä –æ—Ç –±–æ—Ç–∞
         */
        function getBotResponse(message) {
            // –ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ: –ø—Ä–µ–≤—Ä—ä—â–∞–Ω–µ –≤ –º–∞–ª–∫–∏ –±—É–∫–≤–∏ –∏ –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞—Ç–µ–ª–Ω–∏ –∑–Ω–∞—Ü–∏/–º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏
            const lowerMessage = message.toLowerCase().replace(/[.,!?'"-\s]+/g, ' ').trim();

            if (lowerMessage.includes('–∑–¥—Ä–∞–≤–µ–π') || lowerMessage.includes('–∑–¥—Ä–∞—Å—Ç–∏') || lowerMessage.includes('–¥–æ–±—ä—Ä –¥–µ–Ω') || lowerMessage.includes('–¥–æ–±—Ä–æ —É—Ç—Ä–æ') || lowerMessage.includes('–¥–æ–±—ä—Ä –≤–µ—á–µ—Ä')) {
                return '–ó–¥—Ä–∞–≤–µ–π –∏ –¥–æ–±—Ä–µ –¥–æ—à—ä–ª –Ω–∞ –±–æ—Ä–¥–∞! üö¢\n\n–†–∞–¥–≤–∞–º —Å–µ, —á–µ —Å–∏ —Ç—É–∫! –ö–∞—Ç–æ –ú–æ—Ä—Å–∫–∏ –ì–∏–¥, –º–æ–≥–∞ –¥–∞ —Ç–∏ —Ä–∞–∑–∫–∞–∂–∞ –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∏ –Ω–µ—â–∞ –∑–∞ –ß–µ—Ä–Ω–æ –º–æ—Ä–µ, –ø–ª–∞–∂–æ–≤–µ—Ç–µ, –∑–∞–±–µ–ª–µ–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç–∏—Ç–µ –∏–ª–∏ –ø—ä–∫ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ. –ö–∞–∂–∏ –º–∏, —Å –∫–∞–∫–≤–æ –º–æ–≥–∞ –¥–∞ —Ç–∏ –±—ä–¥–∞ –ø–æ–ª–µ–∑–µ–Ω –¥–Ω–µ—Å?';
            } else if (lowerMessage.includes('–∫–∞–∫ —Å–∏') || lowerMessage.includes('–∫–∞–∫ –µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ—Ç–æ')) {
                return '–ê–∑ —Å—ä–º —á—É–¥–µ—Å–Ω–æ! üåä –ú–æ—Ä–µ—Ç–æ –µ —Å–ø–æ–∫–æ–π–Ω–æ, —Å–ª—ä–Ω—Ü–µ—Ç–æ –≥—Ä–µ–µ, –∞ –≤—ä–ª–Ω–∏—Ç–µ —Ç–∏—Ö–æ —Ä–æ–º–æ–ª—è—Ç. –í—Å–∏—á–∫–æ –µ –Ω–∞—Ä–µ–¥! –ö–∞—Ç–æ –∏–∑–∫—É—Å—Ç–≤–µ–Ω –∏–Ω—Ç–µ–ª–µ–∫—Ç, –º–æ–µ—Ç–æ "–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ" –µ –≤–∏–Ω–∞–≥–∏ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∑–∞ —Ä–∞–±–æ—Ç–∞.\n\n–ê —Ç–∏ –∫–∞–∫ —Å–µ —á—É–≤—Å—Ç–≤–∞—à –¥–Ω–µ—Å? –ì–æ—Ç–æ–≤ –ª–∏ —Å–∏ –∑–∞ –º–æ—Ä—Å–∫–∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è?';
            } else if (lowerMessage.includes('–±–ª–∞–≥–æ–¥–∞—Ä—è') || lowerMessage.includes('–º–µ—Ä—Å–∏')) {
                return '–ù—è–º–∞ –∑–∞ –∫–∞–∫–≤–æ! ‚òÄÔ∏è –í–∏–Ω–∞–≥–∏ –Ω–∞ –í–∞—à–µ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ! –ê–∫–æ –∏–º–∞—à –æ—â–µ –≤—ä–ø—Ä–æ—Å–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –º–æ—Ä—Å–∫–∏—è –∂–∏–≤–æ—Ç, –ø–ª–∞–≤–∞–Ω–∏—è –∏–ª–∏ –Ω–µ—â–æ –¥—Ä—É–≥–æ, –Ω–µ —Å–µ –∫–æ–ª–µ–±–∞–π –¥–∞ –ø–æ–ø–∏—Ç–∞—à.';
            } else if (lowerMessage.includes('–∫–æ–π —Å–∏')) {
                return '–ê–∑ —Å—ä–º **–ú–æ—Ä—Å–∫–∏—è—Ç –ì–∏–¥**, —Å—ä–∑–¥–∞–¥–µ–Ω –¥–∞ —Ç–∏ –ø–æ–º–∞–≥–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≤—Å–∏—á–∫–æ, —Å–≤—ä—Ä–∑–∞–Ω–æ —Å –ß–µ—Ä–Ω–æ –º–æ—Ä–µ –∏ –±—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –∫—Ä–∞–π–±—Ä–µ–∂–∏–µ. –ú–æ–≥–∞ –¥–∞ —Ç–∏ –¥–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø–ª–∞–∂–æ–≤–µ, –≥—Ä–∞–¥–æ–≤–µ, –∫–ª–∏–º–∞—Ç –∏ –¥—Ä. –ú–∏—Å–ª–∏ –∑–∞ –º–µ–Ω –∫–∞—Ç–æ –∑–∞ —Ç–≤–æ—è –≤–∏—Ä—Ç—É–∞–ª–µ–Ω –ª–æ—Ü–º–∞–Ω! üß≠';
            } else if (lowerMessage.includes('–≤—Ä–µ–º–µ—Ç–æ') || lowerMessage.includes('—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞') || lowerMessage.includes('–ø—Ä–æ–≥–Ω–æ–∑–∞')) {
                return '–ó–∞ –¥–∞ —Ç–∏ –¥–∞–º —Ç–æ—á–Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞, —â–µ –º–∏ —Ç—Ä—è–±–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä. **"–í—Ä–µ–º–µ—Ç–æ –≤—ä–≤ –í–∞—Ä–Ω–∞"** –∏–ª–∏ **"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –≤–æ–¥–∞—Ç–∞"**). –ü–æ –ø—Ä–∏–Ω—Ü–∏–ø, –∫—Ä–∞–π–±—Ä–µ–∂–∏–µ—Ç–æ —Å–µ —Ä–∞–¥–≤–∞ –Ω–∞ –º–µ–∫ –∫–ª–∏–º–∞—Ç —Å —Ç–æ–ø–ª–∏ –ª–µ—Ç–∞. üå°Ô∏è –ö–∞–∫–≤–æ —Ç–æ—á–Ω–æ —Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞?';
            } else if (lowerMessage.includes('–ø–ª–∞–∂–æ–≤–µ') || lowerMessage.includes('–ø–ª–∞–∂') || lowerMessage.includes('–∏–≤–∏—Ü–∞')) {
                return '–ë—ä–ª–≥–∞—Ä—Å–∫–æ—Ç–æ –ß–µ—Ä–Ω–æ–º–æ—Ä–∏–µ –∏–º–∞ –Ω–∞–¥ 370 –∫–º –±—Ä–µ–≥–æ–≤–∞ –∏–≤–∏—Ü–∞ —Å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∏ –ø–ª–∞–∂–æ–≤–µ! üèñÔ∏è\n\n–ù—è–∫–æ–∏ –æ—Ç –Ω–∞–π-–∏–∑–≤–µ—Å—Ç–Ω–∏—Ç–µ —Å–∞: **–°–ª—ä–Ω—á–µ–≤ –±—Ä—è–≥**, **–ó–ª–∞—Ç–Ω–∏ –ø—è—Å—ä—Ü–∏**, **–ê–ª–±–µ–Ω–∞**, –Ω–æ –∏–º–∞ –∏ —Å–∫—Ä–∏—Ç–∏ –ø–µ—Ä–ª–∏ –∫–∞—Ç–æ –ø–ª–∞–∂ **–ò—Ä–∞–∫–ª–∏** –∏–ª–∏ **–ë–æ–ª–∞—Ç–∞**.\n\n–ö–æ–π —Ä–∞–π–æ–Ω —Ç–µ –ø—Ä–∏–≤–ª–∏—á–∞ –Ω–∞–π-–º–Ω–æ–≥–æ, –∑–∞ –¥–∞ —Ç–∏ –¥–∞–º –ø–æ-–ø–æ–¥—Ä–æ–±–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è?';
            }
            // –§–£–ù–ö–¶–ò–û–ù–ê–õ–ù–û–°–¢ –ó–ê –í–™–ó–ú–û–ñ–ù–û–°–¢–ò (–ü–û–ú–û–©)
            else if (lowerMessage.includes('–ø–æ–º–æ—â') || lowerMessage.includes('–∫–∞–∫–≤–æ –º–æ–∂–µ—à') || lowerMessage.includes('–≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏') || lowerMessage.includes('–æ—Ç–≥–æ–≤–æ—Ä–∏')) {
                return '–†–∞–∑–±–∏—Ä–∞ —Å–µ! –ê–∑ —Å—ä–º –í–∞—à–∏—è—Ç **–ú–æ—Ä—Å–∫–∏ –ì–∏–¥** –∏ –º–æ–≥–∞ –¥–∞ –í–∏ –¥–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —Å–ª–µ–¥–Ω–∏—Ç–µ —Ç–µ–º–∏: üìù\n\n**1. –ü–æ–∑–¥—Ä–∞–≤–∏ –∏ –û–±—â–∏ –í—ä–ø—Ä–æ—Å–∏:**\n* **–ó–¥—Ä–∞–≤–µ–π** / **–ó–¥—Ä–∞—Å—Ç–∏**\n* **–ö–∞–∫ —Å–∏**\n* **–ë–ª–∞–≥–æ–¥–∞—Ä—è** / **–ú–µ—Ä—Å–∏**\n* **–ö–æ–π —Å–∏**\n\n**2. –ú–æ—Ä—Å–∫–∏ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫:**\n* **–ü–ª–∞–∂–æ–≤–µ** (–∫–æ–∏ —Å–∞ –Ω–∞–π-–¥–æ–±—Ä–∏—Ç–µ)\n* **–í—Ä–µ–º–µ—Ç–æ** (–ø—Ä–æ–≥–Ω–æ–∑–∞ –∑–∞ –∫—Ä–∞–π–±—Ä–µ–∂–∏–µ—Ç–æ)\n* **–ö–∞–∫–≤–æ –º–æ–∂–µ—à** / **–ü–æ–º–æ—â** (—Ç–æ–∑–∏ —Å–ø–∏—Å—ä–∫)\n\n–ü—Ä–æ—Å—Ç–æ –≤—ä–≤–µ–¥–µ—Ç–µ –∫–ª—é—á–æ–≤–∞—Ç–∞ –¥—É–º–∞, –∫–æ—è—Ç–æ –í–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä **"–ü–ª–∞–∂–æ–≤–µ"**!';
            }
            else {
                return '–•–º, —Ç–æ–≤–∞ –µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –Ω–æ –∑–∞—Å–µ–≥–∞ –Ω–µ —Å—ä–º –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è–º –Ω–∞ **—Ç–∞–∑–∏** —Ç–µ–º–∞. üòî –ú–æ–∂–µ—à –ª–∏ –¥–∞ –ø—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–∞—à –≤—ä–ø—Ä–æ—Å–∞ —Å–∏ –∏–ª–∏ –¥–∞ –æ–ø–∏—Ç–∞—à —Å –Ω—è–∫–æ—è –æ—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–ª—é—á–æ–≤–∏ –¥—É–º–∏:\n\n* **–ó–¥—Ä–∞–≤–µ–π**\n* **–ö–∞–∫ —Å–∏**\n* **–ü–ª–∞–∂–æ–≤–µ**\n* **–í—Ä–µ–º–µ—Ç–æ**\n* **–ö–∞–∫–≤–æ –º–æ–∂–µ—à**';
            }
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            messageInput.value = '';
            sendBtn.disabled = true;

            showTyping();

            const botResponse = getBotResponse(message);

            // –ù–û–í–ê–¢–ê –õ–û–ì–ò–ö–ê –ó–ê –ë–™–†–ó–û –ò–ó–ß–ò–°–õ–Ø–í–ê–ù–ï –ù–ê –ó–ê–ë–ê–í–Ø–ù–ï–¢–û:
            // –ú–∏–Ω–∏–º—É–º 400ms, –º–∞–∫—Å–∏–º—É–º 1000ms. –ó–∞–±–∞–≤—è–Ω–µ—Ç–æ –µ 15ms –∑–∞ –≤—Å–µ–∫–∏ —Å–∏–º–≤–æ–ª.
            const delay = Math.min(1000, Math.max(400, botResponse.length * 15));

            setTimeout(() => {
                removeTyping();
                addMessage(botResponse, false);
                sendBtn.disabled = false;
                messageInput.focus();
            }, delay);
        }
    </script>
</body>
</html>